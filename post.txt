Hi, FOAMers !

I encountered a problem when compiling my new solver. 
For this solver, I implemented a library [B]libdugksFoam.so[/B] contains a numerical model  [B]fvDVM [/B] and several new B.C.s .

The compilation of the the library is OK.
But when the solver [B]dugksFoam [/B]link to the library, there is an error saying :
 [CODE]undefined reference to`Foam::calculatedMaxwellFvPatchField<double>::typeName'. [/CODE]

The calculatedMaxwellFvPatchField is one of the new BC in the libarary.

The detailed compilation output is :

[CODE]+ wmake libso BCs
wmakeLnInclude: linking include files to ./lnInclude
Making dependency list for source file calculatedMaxwellFvPatchField/calculatedMaxwellFvPatchFields.C
Making dependency list for source file maxwellWallFvsPatchField/maxwellWallFvsPatchFields.C
Making dependency list for source file mixedFvsPatchField/mixedFvsPatchFields.C
SOURCE=calculatedMaxwellFvPatchField/calculatedMaxwellFvPatchFields.C ;  g++ -m64 -Dlinux64 -DWM_DP -Wall -Wextra -Wno-unused-parameter -Wold-style-cast -Wnon-virtual-dtor -O3  -DNoRepository -ftemplate-depth-100 -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/finiteVolume/lnInclude -IlnInclude -I. -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OpenFOAM/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OSspecific/POSIX/lnInclude   -fPIC -c $SOURCE -o Make/linux64GccDPOpt/calculatedMaxwellFvPatchFields.o
SOURCE=maxwellWallFvsPatchField/maxwellWallFvsPatchFields.C ;  g++ -m64 -Dlinux64 -DWM_DP -Wall -Wextra -Wno-unused-parameter -Wold-style-cast -Wnon-virtual-dtor -O3  -DNoRepository -ftemplate-depth-100 -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/finiteVolume/lnInclude -IlnInclude -I. -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OpenFOAM/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OSspecific/POSIX/lnInclude   -fPIC -c $SOURCE -o Make/linux64GccDPOpt/maxwellWallFvsPatchFields.o
SOURCE=mixedFvsPatchField/mixedFvsPatchFields.C ;  g++ -m64 -Dlinux64 -DWM_DP -Wall -Wextra -Wno-unused-parameter -Wold-style-cast -Wnon-virtual-dtor -O3  -DNoRepository -ftemplate-depth-100 -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/finiteVolume/lnInclude -IlnInclude -I. -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OpenFOAM/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OSspecific/POSIX/lnInclude   -fPIC -c $SOURCE -o Make/linux64GccDPOpt/mixedFvsPatchFields.o
'/home/lhzhu/centFOAM/OpenFOAM/lhzhu-2.2.x/platforms/linux64GccDPOpt/lib/libdugksFoam.so' is up to date.
+ wmake libso fvDVM
wmakeLnInclude: linking include files to ./lnInclude
Making dependency list for source file discreteVelocity/discreteVelocity.C
Making dependency list for source file fvDVM/fvDVM.C
SOURCE=discreteVelocity/discreteVelocity.C ;  g++ -m64 -Dlinux64 -DWM_DP -Wall -Wextra -Wno-unused-parameter -Wold-style-cast -Wnon-virtual-dtor -O3  -DNoRepository -ftemplate-depth-100 -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/finiteVolume/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OpenFoam/lnInclude -IdiscreteVelocity/lnInclude -IfvDVM/lnInclude -I../BCs/lnInclude -IlnInclude -I. -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OpenFOAM/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OSspecific/POSIX/lnInclude   -fPIC -c $SOURCE -o Make/linux64GccDPOpt/discreteVelocity.o
SOURCE=fvDVM/fvDVM.C ;  g++ -m64 -Dlinux64 -DWM_DP -Wall -Wextra -Wno-unused-parameter -Wold-style-cast -Wnon-virtual-dtor -O3  -DNoRepository -ftemplate-depth-100 -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/finiteVolume/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OpenFoam/lnInclude -IdiscreteVelocity/lnInclude -IfvDVM/lnInclude -I../BCs/lnInclude -IlnInclude -I. -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OpenFOAM/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OSspecific/POSIX/lnInclude   -fPIC -c $SOURCE -o Make/linux64GccDPOpt/fvDVM.o
'/home/lhzhu/centFOAM/OpenFOAM/lhzhu-2.2.x/platforms/linux64GccDPOpt/lib/libdugksFoam.so' is up to date.
+ wmake
Making dependency list for source file dugksFoam.C
SOURCE=dugksFoam.C ;  g++ -m64 -Dlinux64 -DWM_DP -Wall -Wextra -Wno-unused-parameter -Wold-style-cast -Wnon-virtual-dtor -O3  -DNoRepository -ftemplate-depth-100 -IBCs/lnInclude -IfvDVM/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/finiteVolume/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/dynamicMesh/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/meshTools/lnInclude -IlnInclude -I. -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OpenFOAM/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OSspecific/POSIX/lnInclude   -fPIC -c $SOURCE -o Make/linux64GccDPOpt/dugksFoam.o
/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/finiteVolume/lnInclude/readTimeControls.H: In function ‘int main(int, char**)’:
/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/finiteVolume/lnInclude/readTimeControls.H:32: warning: unused variable ‘adjustTimeStep’
/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/finiteVolume/lnInclude/readTimeControls.H:35: warning: unused variable ‘maxCo’
/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/finiteVolume/lnInclude/readTimeControls.H:38: warning: unused variable ‘maxDeltaT’
g++ -m64 -Dlinux64 -DWM_DP -Wall -Wextra -Wno-unused-parameter -Wold-style-cast -Wnon-virtual-dtor -O3  -DNoRepository -ftemplate-depth-100 -IBCs/lnInclude -IfvDVM/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/finiteVolume/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/dynamicMesh/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/meshTools/lnInclude -IlnInclude -I. -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OpenFOAM/lnInclude -I/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/src/OSspecific/POSIX/lnInclude   -fPIC -Xlinker --add-needed -Xlinker --no-as-needed Make/linux64GccDPOpt/dugksFoam.o -L/home/lhzhu/centFOAM/OpenFOAM/OpenFOAM-2.2.x/platforms/linux64GccDPOpt/lib \
             -L/home/lhzhu/centFOAM/OpenFOAM/lhzhu-2.2.x/platforms/linux64GccDPOpt/lib -lfiniteVolume -ldugksFoam -lmeshTools -lOpenFOAM -ldl   -lm -o /home/lhzhu/centFOAM/OpenFOAM/lhzhu-2.2.x/platforms/linux64GccDPOpt/bin/dugksFoam
[COLOR="Red"]/home/lhzhu/centFOAM/OpenFOAM/lhzhu-2.2.x/platforms/linux64GccDPOpt/lib/libdugksFoam.so: undefined reference to `Foam::calculatedMaxwellFvPatchField<double>::typeName'
collect2: ld returned 1 exit status[/COLOR]
make: *** [/home/lhzhu/centFOAM/OpenFOAM/lhzhu-2.2.x/platforms/linux64GccDPOpt/bin/dugksFoam] Error 1
[/CODE]

BTW, my OF version is 2.2.x .

Hopefully someone can shed some light on this question. Thanks!

Regards,

Lianhua


Hi, zahraa,

I'm also new to OpenFOAM. About 20 days ago,  my experience of OpenFOAM was simply run some the  of tutorial cases and never digged into the source code the solver and the OF libraries. 

Then, I decided to spend some days in this summer to write my own solver to implement my Boss's numerical scheme to solver the Boltzmann-BGK type model equation. In the past 20 days, I 




=================
refCast Problem
link:
http://www.cfd-online.com/Forums/openfoam-solving/60534-temperaturedependent-flux-boundary-condition.html #7
http://www.cfd-online.com/Forums/openfoam/66807-error-when-calculating-values-boundary-using-refcast.html
